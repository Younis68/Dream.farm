<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Dream Farm | Ø¨Ø§Ø´ØªØ±ÛŒÙ† Ù…Ø²Ø§Ø±Ø¹ Ø¨Û† Ø¨Û•Ú©Ø±ÛÚ¯Ø±ØªÙ†</title>
    
    <meta id="meta-desc" name="description" content="Ø§Ø­Ø¬Ø² Ø£Ø¬Ù…Ù„ Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ ÙˆØ§Ù„ÙÙ„Ù„ ÙÙŠ Ø§Ù„Ø¹Ø±Ø§Ù‚. Ù…Ø²Ø§Ø±Ø¹ VIPØŒ Ù…Ø³Ø§Ø¨Ø­ØŒ ÙˆØ£Ù…Ø§ÙƒÙ† Ø¹Ø§Ø¦Ù„ÙŠØ© Ø¨Ø£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§Ø³Ø¨Ø©.">
    <meta id="og-title" property="og:title" content="Dream Farm | ğŸ’ Ù…Ø²Ø§Ø±Ø¹ VIP Ù„Ù„Ø¥ÙŠØ¬Ø§Ø±">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <style>
        :root { --primary-gold: #D4AF37; --primary-dark: #0f2e20; --text-dark: #1a1a1a; --bg-body: #f4f7f6; --white-glass: rgba(255, 255, 255, 0.95); --shadow-soft: 0 15px 40px rgba(0,0,0,0.08); --radius-lg: 24px; --font-main: 'Tajawal', sans-serif; }
        * { box-sizing: border-box; outline: none; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { font-family: var(--font-main); background-color: var(--bg-body); color: var(--text-dark); overflow-x: hidden; padding-bottom: 80px; }
        
        /* Loader */
        #loader { position: fixed; inset: 0; background: var(--primary-dark); z-index: 9999; display: flex; justify-content: center; align-items: center; flex-direction: column; transition: opacity 0.5s ease; pointer-events: none; }
        .loader-icon { font-size: 3rem; color: var(--primary-gold); animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        
        /* Header */
        header { background: linear-gradient(135deg, var(--primary-dark), #1a3c30); height: 380px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; border-bottom-left-radius: 40px; border-bottom-right-radius: 40px; padding: 20px 20px 80px 20px; position: relative; }
        header h1 { font-size: 2.8rem; color: white; margin: 10px 0; font-weight: 800; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .brand-badge { background: rgba(255,255,255,0.15); padding: 8px 20px; border-radius: 50px; border: 1px solid rgba(255,255,255,0.3); color: var(--primary-gold); font-size: 0.9rem; font-weight: 700; backdrop-filter: blur(5px); }
        
        /* Search & Filter */
        .search-container { margin-top: -60px; padding: 0 20px; position: relative; z-index: 50; display: flex; flex-direction: column; align-items: center; gap: 15px; }
        .search-box { background: white; width: 100%; max-width: 700px; padding: 8px 15px; border-radius: 50px; display: flex; align-items: center; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 1px solid rgba(0,0,0,0.05); }
        .search-box i { padding: 0 15px; color: var(--primary-gold); font-size: 1.2rem; }
        .search-box input { width: 100%; border: none; font-size: 1rem; padding: 12px 0; font-family: inherit; color: #333; }
        
        .filter-scroll { width: 100%; max-width: 800px; overflow-x: auto; padding-bottom: 10px; display: flex; gap: 10px; justify-content: flex-start; scrollbar-width: none; -webkit-overflow-scrolling: touch; cursor: grab; }
        .filter-btn { white-space: nowrap; padding: 10px 20px; border-radius: 30px; border: 1px solid white; background: rgba(255,255,255,0.9); color: var(--primary-dark); font-family: inherit; font-weight: 600; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.05); font-size: 0.9rem; display: flex; align-items: center; gap: 8px; }
        .filter-btn.active { background: var(--primary-gold); color: white; border-color: var(--primary-gold); box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3); }

        /* Settings & Admin */
        .settings-btn { position: absolute; top: 25px; right: 25px; background: rgba(255, 255, 255, 0.15); color: white; width: 45px; height: 45px; border-radius: 50%; font-size: 1.2rem; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 100; transition: 0.3s; }
        .settings-btn:hover { background: rgba(255, 255, 255, 0.3); transform: rotate(90deg); }
        .settings-dropdown { display: none; position: absolute; top: 80px; right: 25px; background: var(--white-glass); backdrop-filter: blur(15px); width: 260px; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.2); z-index: 101; padding: 10px; border: 1px solid rgba(255,255,255,0.5); }
        .settings-dropdown button, .settings-dropdown a { display: flex; align-items: center; gap: 12px; padding: 12px 15px; color: var(--primary-dark); text-decoration: none; width: 100%; border: none; background: transparent; cursor: pointer; font-family: inherit; font-weight: 600; font-size: 0.95rem; text-align: right; border-radius: 12px; transition: 0.2s; }
        .settings-dropdown button:hover, .settings-dropdown a:hover { background: rgba(212, 175, 55, 0.15); color: #b48f1f; }

        /* Cards */
        .container { display: grid; grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); gap: 30px; max-width: 1200px; margin: 40px auto; padding: 0 20px; }
        .farm-card { background: white; border-radius: var(--radius-lg); overflow: hidden; box-shadow: var(--shadow-soft); position: relative; display: flex; flex-direction: column; transition: transform 0.3s ease; border: 1px solid rgba(0,0,0,0.03); }
        .farm-card:hover { transform: translateY(-5px); }
        .swiper { width: 100%; height: 260px; background: #eee; }
        .swiper-slide img { width: 100%; height: 100%; object-fit: cover; }
        .card-content { padding: 25px; flex-grow: 1; display: flex; flex-direction: column; }
        .card-title-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .card-title-row h3 { font-size: 1.2rem; color: var(--primary-dark); }
        .location-text { font-size: 0.9rem; color: #777; margin-bottom: 15px; display: flex; align-items: center; gap: 5px; }
        .amenities-list { margin: 10px 0 20px; font-size: 0.85rem; color: #555; display: flex; flex-wrap: wrap; gap: 8px; }
        .amenity-item { background: #f4f7f6; padding: 6px 12px; border-radius: 8px; border: 1px solid #eee; display: flex; align-items: center; gap: 5px; }
        .price-wrapper { margin-top: auto; padding-top: 15px; border-top: 1px dashed #e0e0e0; display: flex; justify-content: space-between; align-items: center; }
        .price-val { font-size: 1.3rem; font-weight: 800; color: var(--primary-dark); }
        .book-btn { background: var(--primary-dark); color: white; border: none; padding: 12px 28px; border-radius: 14px; cursor: pointer; font-weight: 700; transition: 0.3s; box-shadow: 0 4px 15px rgba(15, 46, 32, 0.2); }
        .book-btn:active { transform: scale(0.95); }

        /* Admin Badge */
        .admin-controls { position: absolute; top: 10px; right: 10px; z-index: 20; display:flex; gap:5px; }
        .delete-btn { background: #ff4444; color: white; border:none; padding: 8px; border-radius: 50%; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

        /* Modals & Welcome Box */
        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(15, 46, 32, 0.7); backdrop-filter: blur(8px); z-index: 2000; justify-content: center; align-items: center; padding: 20px; }
        .modal-box { background: white; width: 100%; max-width: 450px; border-radius: 24px; padding: 30px; position: relative; max-height: 90vh; overflow-y: auto; box-shadow: 0 25px 50px rgba(0,0,0,0.3); animation: slideUp 0.3s ease; }
        @keyframes slideUp { from{opacity:0; transform: translateY(20px);} to{opacity:1; transform: translateY(0);} }
        .modal-active { display: flex; }
        .close-modal { position: absolute; left: 20px; top: 20px; font-size: 1.2rem; background: #f0f0f0; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #555; cursor: pointer; transition: 0.2s; }
        
        /* Welcome Modal Specifics */
        #welcome-modal { position: fixed; inset: 0; background: rgba(15, 46, 32, 0.95); z-index: 9500; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: 0.5s; padding: 20px; }
        #welcome-modal.active { opacity: 1; pointer-events: all; }
        .welcome-box { background: white; width: 100%; max-width: 480px; padding: 35px 25px; border-radius: 24px; text-align: center; border: 2px solid var(--primary-gold); transform: scale(0.9); transition: 0.4s; box-shadow: 0 0 50px rgba(212, 175, 55, 0.2); }
        #welcome-modal.active .welcome-box { transform: scale(1); }
        .welcome-list { text-align: right; list-style: none; padding: 0; margin: 25px 0; background: #fdfbf7; padding: 20px; border-radius: 16px; border: 1px solid rgba(212, 175, 55, 0.2); }
        .welcome-list li { margin-bottom: 12px; font-size: 0.95rem; color: #444; display: flex; gap: 10px; align-items: center; }
        .welcome-btn { background: linear-gradient(135deg, var(--primary-dark), #15382b); color: white; width: 100%; padding: 16px; border: none; border-radius: 14px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.3s; box-shadow: 0 10px 25px rgba(15, 46, 32, 0.2); }

        /* Terms List Style */
        .terms-list { list-style: none; margin-top: 10px; padding: 0; }
        .terms-list li { background: #fff; border: 1px solid #eee; border-right: 4px solid var(--primary-gold); margin-bottom: 10px; padding: 15px; border-radius: 8px; font-size: 0.9rem; color: #555; line-height: 1.6; display: flex; gap: 12px; align-items: flex-start; text-align: right; }

        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #333; font-size: 0.9rem; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px 15px; border: 2px solid #eee; border-radius: 12px; font-family: inherit; font-size: 1rem; transition: 0.2s; }
        .form-group input:focus { border-color: var(--primary-gold); }
        .submit-wa { width: 100%; padding: 16px; border: none; border-radius: 12px; background: linear-gradient(135deg, #25D366, #128C7E); color: white; font-weight: 700; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; font-size: 1rem; margin-top: 10px; }

        .social-dock { position: fixed; bottom: 25px; left: 25px; display: flex; flex-direction: column-reverse; gap: 12px; z-index: 90; }
        .social-bubble { width: 45px; height: 45px; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; box-shadow: 0 5px 20px rgba(0,0,0,0.25); text-decoration: none; transition: 0.3s; }
        .wa { background: #25D366; } .tk { background: #000; } .fb { background: #1877F2; } .in { background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fd5949 45%, #d6249f 60%, #285AEB 90%); }

        @media (max-width: 600px) { header h1 { font-size: 2.2rem; } .swiper { height: 220px; } }
    </style>
</head>
<body>

    <div id="loader"><i class="fas fa-gem loader-icon"></i></div>

    <div id="welcome-modal">
        <div class="welcome-box">
            <i class="fas fa-crown" style="font-size:3.5rem; color:var(--primary-gold); margin-bottom:15px;"></i>
            <h2 style="color:var(--primary-dark); margin-bottom:10px;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Dream Farm</h2>
            <p style="color:#666; font-size:0.95rem;">Ø§Ù„ÙˆØ¬Ù‡Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ù„Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ø±Ø§Ù‚ÙŠØ© ÙÙŠ Ø§Ù„Ø¹Ø±Ø§Ù‚</p>
            <ul class="welcome-list">
                <li><i class="fas fa-check-circle" style="color:var(--primary-gold)"></i> <b>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²:</b> ÙŠØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø¬Ø² ÙÙ‚Ø· Ø¨Ø¹Ø¯ Ø¯ÙØ¹ Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ†.</li>
                <li><i class="fas fa-calendar-day" style="color:var(--primary-gold)"></i> <b>Ø§Ù„Ø£Ø³Ø¹Ø§Ø±:</b> ØªØ®ØªÙ„Ù Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙÙŠ Ø§Ù„Ø¹Ø·Ù„ ÙˆØ§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª.</li>
                <li><i class="fas fa-leaf" style="color:var(--primary-gold)"></i> <b>Ø§Ù„Ù†Ø¸Ø§ÙØ©:</b> ÙŠØ±Ø¬Ù‰ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ù…ÙƒØ§Ù† ÙƒÙ…Ø§ Ø§Ø³ØªÙ„Ù…ØªÙ‡.</li>
            </ul>
            <button class="welcome-btn" onclick="acceptTerms()">Ù…ÙˆØ§ÙÙ‚ØŒ Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØµÙØ­</button>
        </div>
    </div>

    <header>
        <span class="brand-badge">Premium Rentals</span>
        <div class="settings-btn" onclick="toggleSettings(event)"><i class="fas fa-cog"></i></div>
        <div class="settings-dropdown" id="settingsDropdown">
            <button onclick="promptAdminLogin()"><i class="fas fa-user-shield"></i> Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</button>
            <button id="addFarmBtn" style="display:none; color:var(--primary-gold);" onclick="openAddFarmModal()"><i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ø²Ø±Ø¹Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
            <button class="notes-toggle-btn" onclick="openDetailedTerms()"><i class="fas fa-file-contract"></i> Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª</button>
            <a href="https://wa.me/9647502679528" target="_blank" style="color:#25D366;"><i class="fab fa-whatsapp"></i> ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a>
        </div>
        <h1>Dream Farm</h1>
        <p style="color:rgba(255,255,255,0.8);">ØªØ¬Ø±Ø¨Ø© Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ© Ù„Ø£Ø¬Ù…Ù„ Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ø³ÙŠØ§Ø­ÙŠØ©</p>
    </header>

    <div class="search-container">
        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø£Ùˆ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©...">
        </div>
        
        <div class="filter-scroll">
            <button class="filter-btn active" onclick="filterFarms('all', this)"><i class="fas fa-th"></i> Ø§Ù„ÙƒÙ„</button>
            <button class="filter-btn" onclick="filterFarms('family', this)"><i class="fas fa-users"></i> Ø¹Ø§Ø¦Ù„Ø§Øª</button>
            <button class="filter-btn" onclick="filterFarms('pool', this)"><i class="fas fa-swimming-pool"></i> Ù…Ø³Ø¨Ø­</button>
            <button class="filter-btn" onclick="filterFarms('youth', this)"><i class="fas fa-user-friends"></i> Ø´Ø¨Ø§Ø¨</button>
            <button class="filter-btn" onclick="filterFarms('economy', this)"><i class="fas fa-tag"></i> Ø§Ù‚ØªØµØ§Ø¯ÙŠ</button>
        </div>
    </div>

    <div class="container" id="farm-list-container"></div>

    <div class="social-dock">
        <a href="#" class="social-bubble fb"><i class="fab fa-facebook-f"></i></a>
        <a href="#" class="social-bubble in"><i class="fab fa-instagram"></i></a>
        <a href="https://www.tiktok.com/@dream.farm68" class="social-bubble tk"><i class="fab fa-tiktok"></i></a>
    </div>

    <div id="terms-modal" class="modal-overlay">
        <div class="modal-box">
            <span class="close-modal" onclick="closeTermsModal()">&times;</span>
            <h3 style="text-align:center; color:var(--primary-dark); margin-bottom:20px;">ğŸ“œ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª</h3>
            <ul class="terms-list">
                <li><i class="fas fa-money-bill-wave" style="color:var(--primary-gold); margin-top:3px;"></i> <div>Ø§Ù„Ø­Ø¬Ø² Ù„Ø§ ÙŠØ¹ØªØ¨Ø± Ù…Ø¤ÙƒØ¯Ø§Ù‹ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ Ø¯ÙØ¹ Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ† (Qi Card / FastPay).</div></li>
                <li><i class="fas fa-clock" style="color:var(--primary-gold); margin-top:3px;"></i> <div>ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø§Ø¹Ø© 2:00 Ø¸Ù‡Ø±Ø§Ù‹ØŒ ÙˆÙˆÙ‚Øª Ø§Ù„Ø®Ø±ÙˆØ¬ 11:00 ØµØ¨Ø§Ø­Ø§Ù‹ Ù…Ù† Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ.</div></li>
                <li><i class="fas fa-users" style="color:var(--primary-gold); margin-top:3px;"></i> <div>ÙŠÙ…Ù†Ø¹ Ø¯Ø®ÙˆÙ„ Ø¹Ø¯Ø¯ Ø£Ø´Ø®Ø§Øµ Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªÙÙ‚ Ø¹Ù„ÙŠÙ‡ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø².</div></li>
                <li><i class="fas fa-broom" style="color:var(--primary-gold); margin-top:3px;"></i> <div>ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø¹Ù„Ù‰ Ù†Ø¸Ø§ÙØ© Ø§Ù„Ù…ÙƒØ§Ù† ÙˆØ§Ù„Ø£Ø«Ø§Ø«ØŒ Ø£ÙŠ Ø¶Ø±Ø± Ø£Ùˆ ÙƒØ³Ø± ÙŠØªØ­Ù…Ù„Ù‡ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±.</div></li>
            </ul>
            <button onclick="closeTermsModal()" class="book-btn" style="width:100%; margin-top:20px; background:#f0f0f0; color:#333;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <div id="booking-modal" class="modal-overlay">
        <div class="modal-box">
            <span class="close-modal" onclick="closeModal()"><i class="fas fa-times"></i></span>
            <h3 style="text-align:center; margin-bottom:5px;">Ø·Ù„Ø¨ Ø­Ø¬Ø²</h3>
            <p style="text-align:center;color:#777;font-size:0.9rem;margin-bottom:20px;">Ù„Ù€ <span id="modal-farm-name" style="color:var(--primary-gold);font-weight:bold;"></span></p>
            
            <form id="booking-form">
                <input type="hidden" id="farm-id-modal">
                <div class="form-group">
                    <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ</label>
                    <input type="text" id="name" required placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ">
                </div>
                <div class="form-group">
                    <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²</label>
                    <input type="date" id="date" required onchange="checkPrice()">
                </div>
                <div id="price-calc-area" style="text-align:center; padding:15px; background:#f4f9f6; border:1px solid #d1e7dd; border-radius:12px; margin-bottom:20px; display:none;"></div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                    <div class="form-group">
                        <label>Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ</label>
                        <input type="number" id="guests" placeholder="Ù…Ø«Ø§Ù„: 10" required min="1">
                    </div>
                    <div class="form-group">
                        <label>Ù†ÙˆØ¹ Ø§Ù„ÙƒØ±ÙˆØ¨</label>
                        <select id="type" required></select>
                    </div>
                </div>
                <button type="submit" id="submit-btn" class="submit-wa"><i class="fab fa-whatsapp" style="font-size:1.2rem;"></i> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§ØªØ³Ø§Ø¨</button>
            </form>
        </div>
    </div>

    <div id="admin-modal" class="modal-overlay">
        <div class="modal-box">
            <span class="close-modal" onclick="document.getElementById('admin-modal').classList.remove('modal-active')">&times;</span>
            <h3 style="text-align:center; margin-bottom:15px;">Ø¥Ø¶Ø§ÙØ© Ù…Ø²Ø±Ø¹Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>
            <form id="add-farm-form">
                <div class="form-group"><label>Ø§Ø³Ù… Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</label><input type="text" id="new-name" required></div>
                <div class="form-group"><label>Ø§Ù„Ù…ÙˆÙ‚Ø¹</label><input type="text" id="new-location" required></div>
                <div class="form-group"><label>Ø§Ù„Ø³Ø¹Ø± (Ø¹Ø§Ø¯ÙŠ)</label><input type="number" id="new-price" required></div>
                <div class="form-group"><label>Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©</label><input type="text" id="new-image" placeholder="https://..." required></div>
                <div class="form-group">
                    <label>Ø§Ù„Ù†ÙˆØ¹</label>
                    <select id="new-type">
                        <option value="family">Ø¹Ø§Ø¦Ù„Ø§Øª</option>
                        <option value="youth">Ø´Ø¨Ø§Ø¨</option>
                        <option value="all">Ù…Ø®ØªÙ„Ø·</option>
                    </select>
                </div>
                <button type="submit" class="submit-wa" style="background:var(--primary-dark);">Ø­ÙØ¸ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</button>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
        // --- Data Initialization ---
        const defaultFarms = [
            { 
                id: 1, 
                name: "Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ù‚ØµØ± Ø§Ù„Ø°Ù‡Ø¨ÙŠ", 
                location: "Ø¯ÙˆÙƒØ§Ù†ØŒ Ù‚Ø±Ø¨ Ø§Ù„Ø³Ø¯", 
                images: ["https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800", "https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800"], 
                features: ["Ù…Ø³Ø¨Ø­ Ù…Ø¯ÙØ£", "Ø³ÙŠÙ†Ù…Ø§ Ø®Ø§Ø±Ø¬ÙŠØ©", "Ù…ÙˆÙ„Ø¯Ø© 24h"], 
                bookedDates: ["2025-12-24"], 
                allowedType: "family", 
                rawPrice: 150000,
                pricing: { default: "150,000", special: { 4: "200,000", 5: "250,000", 6: "175,000" } } 
            },
            { 
                id: 2, 
                name: "ÙÙŠÙ„Ø§ Ø§Ù„Ø¬Ø¨Ù„", 
                location: "Ø¬Ø¨Ù„ Ø§Ø²Ù…Ø±", 
                images: ["https://images.unsplash.com/photo-1518780664697-55e3ad937233?w=800"], 
                features: ["Ø¥Ø·Ù„Ø§Ù„Ø© Ø¨Ø§Ù†ÙˆØ±Ø§Ù…Ø§", "Ø³Ø§Ø­Ø© Ø´ÙˆØ§Ø¡", "Ù…ÙˆÙ‚Ø¯ Ø­Ø·Ø¨"], 
                bookedDates: [], 
                allowedType: "all", 
                rawPrice: 75000,
                pricing: { default: "75,000", special: { 4: "100,000", 5: "125,000", 6: "90,000" } } 
            },
            { 
                id: 3, 
                name: "ÙƒÙˆØ® Ø§Ù„ØºØ§Ø¨Ø©", 
                location: "Ø´Ø§Ø±Ø¨Ø§Ú˜ÙŠØ±", 
                images: ["https://images.unsplash.com/photo-1542718610-a1d656d1884c?w=800"], 
                features: ["ØªØµÙ…ÙŠÙ… Ø®Ø´Ø¨ÙŠ", "Ø®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø©", "Ù†Ù‡Ø± Ù‚Ø±ÙŠØ¨"], 
                bookedDates: [], 
                allowedType: "youth", 
                rawPrice: 50000,
                pricing: { default: "50,000", special: { 4: "65,000", 5: "80,000", 6: "60,000" } } 
            }
        ];

        let farmsData = JSON.parse(localStorage.getItem('farmsData')) || defaultFarms;
        let isAdmin = localStorage.getItem('isAdmin') === 'true';

        const container = document.getElementById('farm-list-container');
        let currentCategory = 'all';
        let currentSearch = '';
        let swiperInstances = [];

        window.addEventListener('load', () => { 
            setTimeout(() => { 
                const loader = document.getElementById('loader');
                loader.style.opacity = '0';
                setTimeout(() => {
                    loader.style.display = 'none';
                    // Show Welcome Modal
                    document.getElementById('welcome-modal').classList.add('active');
                }, 500);
                
                checkURLParams(); 
            }, 800);
            if(isAdmin) document.getElementById('addFarmBtn').style.display = 'flex';
        });

        // --- Deep Linking ---
        function checkURLParams() {
            const params = new URLSearchParams(window.location.search);
            const farmId = params.get('id');
            if (farmId) {
                const farm = farmsData.find(f => f.id == farmId);
                if (farm) {
                    document.getElementById('welcome-modal').classList.remove('active'); // Close welcome if deep linking
                    document.getElementById('searchInput').value = farm.name;
                    currentSearch = farm.name;
                    applyFilters();
                    openModal(farm.id);
                }
            }
        }

        // --- Filter Logic ---
        window.filterFarms = (category, btnElement) => {
            document.getElementById('searchInput').value = '';
            currentSearch = '';
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btnElement.classList.add('active');
            currentCategory = category;
            applyFilters();
        };

        document.getElementById('searchInput').addEventListener('keyup', (e) => {
            currentSearch = e.target.value.toLowerCase();
            applyFilters();
        });

        function applyFilters() {
            const filtered = farmsData.filter(farm => {
                const matchesSearch = farm.name.includes(currentSearch) || farm.location.includes(currentSearch);
                let matchesCategory = true;
                if (currentCategory === 'family') matchesCategory = (farm.allowedType === 'family' || farm.allowedType === 'all');
                else if (currentCategory === 'youth') matchesCategory = (farm.allowedType === 'youth' || farm.allowedType === 'all');
                else if (currentCategory === 'pool') matchesCategory = farm.features.some(f => f.includes('Ù…Ø³Ø¨Ø­'));
                else if (currentCategory === 'economy') matchesCategory = farm.rawPrice <= 100000;
                return matchesSearch && matchesCategory;
            });
            renderFarms(filtered);
        }

        // --- Render Logic ---
        function renderFarms(list) {
            if(swiperInstances.length > 0) {
                swiperInstances.forEach(s => s.destroy(true, true));
                swiperInstances = [];
            }
            container.innerHTML = "";
            
            if (list.length === 0) { 
                container.innerHTML = `<div style="grid-column:1/-1; text-align:center; padding:60px 20px; color:#888;"><h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø©</h3></div>`; 
                return; 
            }

            list.forEach(farm => {
                let badgeClass = farm.allowedType === 'family' ? '#E91E63' : (farm.allowedType === 'youth' ? '#9C27B0' : '#009688');
                let badgeText = farm.allowedType === 'family' ? 'Ø¹Ø§Ø¦Ù„Ø§Øª' : (farm.allowedType === 'youth' ? 'Ø´Ø¨Ø§Ø¨' : 'Ù…Ø®ØªÙ„Ø·');
                let badge = `<span style="background:${badgeClass};color:white;padding:4px 12px;border-radius:20px;font-size:0.75rem;font-weight:bold">${badgeText}</span>`;
                
                let adminControls = isAdmin ? `<div class="admin-controls"><button class="delete-btn" onclick="deleteFarm(${farm.id})"><i class="fas fa-trash"></i></button></div>` : '';

                const slides = farm.images.map(img => `<div class="swiper-slide"><img src="${img}" loading="lazy"></div>`).join('');

                container.innerHTML += `
                <div class="farm-card" id="farm-${farm.id}">
                    ${adminControls}
                    <button onclick="shareFarm(${farm.id}, '${farm.name}')" style="position:absolute;top:15px;left:15px;z-index:10;background:rgba(255,255,255,0.9);border:none;width:35px;height:35px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;"><i class="fas fa-share-alt" style="color:var(--primary-dark)"></i></button>
                    <div class="swiper mySwiper-${farm.id}"><div class="swiper-wrapper">${slides}</div><div class="swiper-pagination"></div><div class="swiper-button-next"></div><div class="swiper-button-prev"></div></div>
                    <div class="card-content">
                        <div class="card-title-row"><h3>${farm.name}</h3>${badge}</div>
                        <div class="location-text"><i class="fas fa-map-marker-alt" style="color:var(--primary-gold)"></i> ${farm.location}</div>
                        <div class="amenities-list">${farm.features.map(f => `<div class="amenity-item"><i class="fas fa-check" style="color:#25D366;font-size:0.7rem"></i> ${f}</div>`).join('')}</div>
                        <div class="price-wrapper">
                            <div><div class="price-val">${farm.pricing.default} <small style="font-size:0.8rem;font-weight:400">Ø¯.Ø¹</small></div><div style="font-size:0.75rem;color:#999">Ø³Ø¹Ø± Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</div></div>
                            <button class="book-btn" onclick="openModal(${farm.id})">Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button>
                        </div>
                    </div>
                </div>`;
            });

            list.forEach(farm => {
                const sw = new Swiper(`.mySwiper-${farm.id}`, { 
                    pagination: { el: ".swiper-pagination", dynamicBullets: true }, 
                    navigation: { nextEl: ".swiper-button-next", prevEl: ".swiper-button-prev" }, 
                    loop: true, 
                    spaceBetween: 0 
                });
                swiperInstances.push(sw);
            });
        }

        // --- Admin Functions ---
        window.promptAdminLogin = () => {
            const pass = prompt("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø£Ø¯Ù…Ù†:");
            if(pass === "1234") {
                localStorage.setItem('isAdmin', 'true');
                isAdmin = true;
                alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­! âœ…");
                location.reload();
            } else if(pass) {
                alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø© âŒ");
            }
        };

        window.openAddFarmModal = () => {
            document.getElementById('settingsDropdown').style.display = 'none';
            document.getElementById('admin-modal').classList.add('modal-active');
        };

        document.getElementById('add-farm-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const newId = Date.now();
            const name = document.getElementById('new-name').value;
            const price = document.getElementById('new-price').value;
            const newFarm = {
                id: newId,
                name: name,
                location: document.getElementById('new-location').value,
                images: [document.getElementById('new-image').value],
                features: ["Ø¬Ø¯ÙŠØ¯", "VIP"],
                bookedDates: [],
                allowedType: document.getElementById('new-type').value,
                rawPrice: parseInt(price),
                pricing: { default: parseInt(price).toLocaleString() }
            };
            farmsData.unshift(newFarm);
            localStorage.setItem('farmsData', JSON.stringify(farmsData));
            document.getElementById('admin-modal').classList.remove('modal-active');
            renderFarms(farmsData);
        });

        window.deleteFarm = (id) => {
            if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©ØŸ")) {
                farmsData = farmsData.filter(f => f.id !== id);
                localStorage.setItem('farmsData', JSON.stringify(farmsData));
                renderFarms(farmsData);
            }
        };

        // --- Helper & Modal Functions ---
        window.acceptTerms = () => { document.getElementById('welcome-modal').classList.remove('active'); }
        window.toggleSettings = (e) => { e.stopPropagation(); const m = document.getElementById('settingsDropdown'); m.style.display = (m.style.display === 'block') ? 'none' : 'block'; }
        
        // **Restored Terms Logic**
        window.openDetailedTerms = () => { 
            document.getElementById('settingsDropdown').style.display = 'none'; 
            document.getElementById('terms-modal').classList.add('modal-active'); 
        }
        window.closeTermsModal = () => { document.getElementById('terms-modal').classList.remove('modal-active'); }

        window.shareFarm = (id, name) => { 
            const url = `${window.location.origin}${window.location.pathname}?id=${id}`;
            if(navigator.share) navigator.share({title: 'Dream Farm', text: `Ø´Ø§Ù‡Ø¯ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø±Ø§Ø¦Ø¹Ø©: ${name}`, url: url}); 
            else { navigator.clipboard.writeText(url); alert("ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø²Ø±Ø¹Ø©! ğŸ”—"); }
        }
        
        const modal = document.getElementById('booking-modal');
        const dateInput = document.getElementById('date');
        const priceArea = document.getElementById('price-calc-area');
        const submitBtn = document.getElementById('submit-btn');
        let currentFarm = null;

        window.openModal = (id) => {
            currentFarm = farmsData.find(f => f.id === id);
            const newUrl = `${window.location.pathname}?id=${id}`;
            window.history.pushState({path: newUrl}, '', newUrl);

            document.getElementById('modal-farm-name').textContent = currentFarm.name;
            document.getElementById('farm-id-modal').value = id;
            dateInput.min = new Date().toISOString().split('T')[0];
            dateInput.value = ''; priceArea.style.display = 'none'; submitBtn.disabled = true; submitBtn.style.opacity = '0.6';

            const typeSel = document.getElementById('type'); typeSel.innerHTML = '';
            const opts = { family: '<option>Ø¹Ø§Ø¦Ù„Ø§Øª ÙÙ‚Ø· (Family Only)</option>', youth: '<option>Ø´Ø¨Ø§Ø¨ (Youth)</option>', all: '<option>Ø¹Ø§Ø¦Ù„Ø§Øª (Family)</option><option>Ø´Ø¨Ø§Ø¨ (Youth)</option>' };
            typeSel.innerHTML = opts[currentFarm.allowedType] || opts.all;
            modal.classList.add('modal-active');
        }
        
        window.closeModal = () => { 
            modal.classList.remove('modal-active'); 
            window.history.pushState({}, document.title, window.location.pathname);
        }

        window.checkPrice = () => {
            if(!dateInput.value || !currentFarm) return;
            const dStr = dateInput.value;
            const dObj = new Date(dStr + 'T00:00:00'); 
            const day = dObj.getDay(); 

            if(currentFarm.bookedDates.includes(dStr)) { 
                priceArea.innerHTML = `<div style="color:#d32f2f;font-weight:bold;"><i class="fas fa-ban"></i> Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ… Ù…Ø­Ø¬ÙˆØ² Ù…Ø³Ø¨Ù‚Ø§Ù‹</div>`; 
                priceArea.style.display='block'; submitBtn.disabled=true; submitBtn.style.opacity = '0.5';
                return; 
            }
            let price = currentFarm.pricing.default; 
            if(currentFarm.pricing.special && currentFarm.pricing.special[day]) {
                price = currentFarm.pricing.special[day];
            }
            priceArea.style.display = 'block'; 
            priceArea.innerHTML = `<div style="font-size:0.9rem;color:#555;">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</div><div style="color:var(--primary-dark);font-weight:800;font-size:1.4rem;margin-top:5px;">${price} <small>Ø¯.Ø¹</small></div>`; 
            submitBtn.disabled = false; submitBtn.style.opacity = '1';
        }

        document.getElementById('booking-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const farmId = parseInt(document.getElementById('farm-id-modal').value);
            const securedFarm = farmsData.find(f => f.id === farmId); 
            
            if (!securedFarm) { alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"); return; }

            const n = document.getElementById('name').value;
            const d = dateInput.value;
            const g = document.getElementById('guests').value;
            const t = document.getElementById('type').value;

            const dObj = new Date(d + 'T00:00:00');
            const day = dObj.getDay();
            let finalPrice = securedFarm.pricing.default;
            if(securedFarm.pricing.special && securedFarm.pricing.special[day]) {
                finalPrice = securedFarm.pricing.special[day];
            }

            const msg = `*ğŸ‘‹ Ø·Ù„Ø¨ Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯ (Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹)*\n\nğŸ¡ *Ø§Ù„Ù…Ø²Ø±Ø¹Ø©:* ${securedFarm.name}\nğŸ“… *Ø§Ù„ØªØ§Ø±ÙŠØ®:* ${d}\nğŸ’° *Ø§Ù„Ø³Ø¹Ø±:* ${finalPrice} Ø¯.Ø¹\nğŸ‘¤ *Ø§Ù„Ø§Ø³Ù…:* ${n}\nğŸ”¢ *Ø§Ù„Ø¹Ø¯Ø¯:* ${g}\nğŸ“‹ *Ø§Ù„Ù†ÙˆØ¹:* ${t}\n\nÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨!`;
            window.open(`https://wa.me/9647502679528?text=${encodeURIComponent(msg)}`, '_blank');
            closeModal();
        });

        window.onclick = (e) => { if(e.target.classList.contains('modal-overlay')) e.target.classList.remove('modal-active'); if(!e.target.closest('.settings-btn') && !e.target.closest('.settings-dropdown')) document.getElementById('settingsDropdown').style.display = 'none'; }

        renderFarms(farmsData);
    </script>
</body>
</html>
